
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../yaml-faq/">
      
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.10">
    
    
      
        <title>Vi 101 - CKA Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fad675c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vi-101" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CKA Notes" class="md-header__button md-logo" aria-label="CKA Notes" data-md-component="logo">
      
  <img src="../../img/CKA-img.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CKA Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Vi 101
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/AlbinB97/CKA-Notes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    AlbinB97/CKA-Notes
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CKA Notes" class="md-nav__button md-logo" aria-label="CKA Notes" data-md-component="logo">
      
  <img src="../../img/CKA-img.png" alt="logo">

    </a>
    CKA Notes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AlbinB97/CKA-Notes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    AlbinB97/CKA-Notes
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/WIP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WIP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/imperative/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Imperative
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/crictl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Crictl
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Information
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Information
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../etcd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Etcd FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../diagnose-crashed-apiserver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Diagnose Crashed Apiserver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../yaml-faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YAML FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Vi 101
  </span>
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="vi-101">vi-101</h1>
<p>Source: <a href="https://github.com/kodekloudhub/community-faq/blob/main/docs/vi-101.md">https://github.com/kodekloudhub/community-faq/blob/main/docs/vi-101.md</a></p>
<p><strong>IMPORTANT</strong> - The <code>vimium</code> chrome extension is known to cause issues with using vi in lab terminals due to the fact that it intercepts the keystrokes that the vi editor is expecting. The whole point of this extension is to use vi commands to drive the browser itself, therefore the vi inside the browser will never receive the commands!</br>If you have this extension, please disable it.</p>
<p>Real simple guide to the most important stuff with <code>vi</code> editor and questions commonly asked</p>
<ul>
<li><a href="#i-cannot-type-anything">I cannot type anything!</a></li>
<li><a href="#i-cannot-exit-vi">I cannot exit vi</a></li>
<li><a href="#modes">Modes</a></li>
<li><a href="#most-useful-normal-mode-commands">Most useful normal mode commands</a><ul>
<li><a href="#files">Files</a></li>
<li><a href="#editing">Editing</a></li>
</ul>
</li>
<li><a href="#suggested-settings-for-yaml-editing">Suggested settings for YAML editing</a></li>
</ul>
<h1 id="i-cannot-type-anything">I cannot type anything!</h1>
<p>Probably the first time you've used <code>vi</code> right? When you start the editor, it is in what is known as <code>normal</code> mode, which is a command entry mode. Certain keystrokes will be interpreted as commands, others may be ignored. What won't be happening is text is being typed into the editor.</p>
<p>To begin editing, you must enter <code>insert</code> mode, by typing <code>i</code>. If you've typed some other keys in confusion, this may not work immediately. Press <code>ESC</code> then press <code>i</code>. The bottom line of the editor should read <code>--INSERT--</code>. Now you can edit stuff.</p>
<h1 id="i-cannot-exit-vi">I cannot exit vi</h1>
<p>Some possibilities.</p>
<ol>
<li>
<p>You are not in <code>normal</code> mode.</p>
<p>You need to be in <code>normal</code> mode to execute any of the commands to exit the editor.
If it says <code>INSERT</code>, <code>VISUAL</code> or anything like that at the bottom of the screen, press <code>ESC</code> until it no longer does.</p>
<p>Then you should be able to press <code>:</code> and see it come up at the bottom of the screen, so you're able to enter something like <code>wq</code></p>
</li>
<li>
<p>You are editing a read-only file.</p>
<p>You get a message like <code>E505 "file" is read only (add ! to override)</code> when you try <code>:wq</code>.</p>
<p>The message is encouraging you to do <code>:wq!</code> to force overwrite of a read-only file, but if that file belongs to root and you are not root, then this isn't going to work and you'll get the same error. The only way to exit in this case is to exit <em>without</em> saving, which is <code>:q!</code>. For root owned files, you must use <code>sudo</code>, e.g.</p>
<p><code>sudo vi /etc/hosts</code></p>
<p>Note that in Kubernetes labs, you are already the root user so you'll never need <code>sudo</code>. In Linux labs, you are never the root user when the lab starts, and you'll need <code>sudo</code> a lot!</p>
</li>
</ol>
<h1 id="modes">Modes</h1>
<p>The editor has several modes. It operates differently in each mode.</p>
<h2 id="normal-mode">Normal mode</h2>
<p>This is the mode that you are in when you first start vi. It is a command mode, therefore most key strokes are interpreted as editor commands. Some useful commands are detailed further down.</p>
<p>Pressing the <code>ESC</code> key when in any other mode returns you to Normal mode.</p>
<h2 id="insert-mode">Insert mode</h2>
<p>In this mode you can edit text in the document. It should say <code>-- INSERT --</code> at the bottom of the screen.</p>
<p>To enter Insert mode, hit <code>i</code> when in Normal mode</p>
<h2 id="visual-mode">Visual Mode</h2>
<p>In this mode you can select blocks of text on which to operate. Use normal mode commands to operate on the selected text. There are 3 flavours of this:</p>
<ul>
<li><strong>Visual</strong> - This mode allows you to select text character by character using cursor keys. It will say <code>-- VISUAL --</code> at the bottom of the screen. Press <code>v</code> when in normal mode to enter.</li>
<li><strong>Visual Line</strong> - This mode allows you to select entire lines. It will say <code>-- VISUAL LINE --</code> at the bottom of the screen. Press <code>SHIFT-V</code> when in normal mode to enter.</li>
<li><strong>Visual Block</strong> - This mode allows you to select blocks of text horizontally and vertically. It will say <code>-- VISUAL BLOCK --</code> at the bottom of the screen. Press <code>CTRL-V</code> when in normal mode to enter.</li>
</ul>
<h1 id="most-useful-normal-mode-commands">Most useful normal mode commands</h1>
<p>All the following work in <code>normal</code> mode. As soon as you enter insert mode, you need to press <code>ESC</code> before any of the following will work again.</p>
<h2 id="files">Files</h2>
<ul>
<li>
<p>Saving without exiting</p>
<ul>
<li><code>:w</code> - When editing Kubernetes YAML in the exam, do this and run <code>kubectl apply</code> in another terminal window. Saves you going in and out the editor if you have syntax errors. Only quit <code>vi</code> once <code>kubectl</code> is successful.</li>
</ul>
</li>
<li>
<p>Exit without saving</p>
<ul>
<li><code>:q!</code></li>
</ul>
</li>
<li>
<p>Exit and save</p>
<p>Both these commands achieve the same thing.
1. <code>:wq</code>
1. <code>:x</code></p>
</li>
<li>
<p>Pasting from documentation</p>
<ul>
<li><code>:set paste</code> - Turn on paste mode. Then hit <code>i</code> for insert mode. It will say <code>INSERT (paste)</code></li>
<li><code>:set nopaste</code> - Turn off paste mode. Do this immediately after pasting from documentation.</li>
</ul>
</li>
</ul>
<h2 id="editing">Editing</h2>
<ul>
<li><code>i</code> - Enter insert mode at cursor position</li>
<li><code>SHIFT - A</code> - Enter insert mode at end of current line</li>
<li><code>y</code> - Yank (copy) current line to vi internal buffer (not desktop clipboard)</li>
<li><code>p</code> - Paste from vi internal buffer. It will paste <em>below</em> not <em>at</em> the line the cursor is on.</li>
<li><code>dd</code> - Delete (cut) line under cursor. (<code>2dd</code> next 2 lines, <code>5dd</code> next 5 lines etc.). Lines removed this way are placed in vi internal buffer, i.e. can be pasted.</li>
<li><code>u</code> - Undo last edit (<code>2u</code> last 2 edits etc.)</li>
<li><code>r</code> - Replace character under the cursor. Press <code>r</code> followed by the character you want to put in. It will replace the character that the cursor is on.</li>
<li><code>SHIFT + D</code> - Delete from cursor to end of line</li>
<li><code>gg</code> - Go to top of file</li>
<li><code>SHIFT + G</code> - Go to last line in file</li>
<li><code>&gt;</code> - Indent current line one tab stop. (<code>.</code> indent again)</li>
<li><code>&lt;</code> - Outdent current line one tab stop. (<code>.</code> outdent again)</li>
<li><code>SHIFT + V</code> - Enter visual line mode. You can select multiple lines of text and perform operations like <code>dd</code>, <code>y</code>, <code>&gt;</code>, <code>&lt;</code> on the selected lines</li>
</ul>
<h1 id="line-numbers">Line Numbers</h1>
<p>There are a couple of modes for showing line numbers in the editor. Generally you'll want to show line numbers so that when an error message from some command refers to a line number in a file you're processing, you can find it. You change the line number mode from <code>normal</code> mode using <code>:</code> commands.</p>
<h2 id="absolute-numbers">Absolute numbers</h2>
<p>This mode numbers the lines normally starting with 1 as the first line of the file.</p>
<p>Turn on/off with <code>:set nu</code>/<code>:set nonu</code></p>
<h2 id="relative-numbers">Relative numbers</h2>
<p>This mode shows numbers relative to where the cursor is positioned, so line 1 is the line directly following the cursor. This mode is especially useful for finding an error in a <a href="../yaml-faq/#documents">Kubernetes manifest containing multiple resource documents</a>.</p>
<p>Turn on/off with  <code>:set rnu</code>/<code>:set nornu</code></p>
<p>See examples of these modes in action <a href="https://jeffkreeftmeijer.com/vim-number/">here</a></p>
<h1 id="suggested-settings-for-yaml-editing">Suggested settings for YAML editing</h1>
<p>Create a file <code>~/.vimrc</code> and add the following lines to it.</p>
<pre><code class="language-shell">set nu
set sw=2
set et
set ts=2
set ai
</code></pre>
<p>What these do, in order:</p>
<ol>
<li>Enable line numbers</li>
<li>
<p>Set shift width 2 chars</p>
<p>Note: May already be configured on exam terminal</p>
</li>
<li>
<p>Expand tabs to spaces</p>
<p>Note: May already be configured on exam terminal</p>
</li>
<li>
<p>Set tab stop to 2 chars</p>
<p>Note: May already be configured on exam terminal</p>
</li>
<li>
<p>Enable auto indent</p>
</li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
    
  </body>
</html>